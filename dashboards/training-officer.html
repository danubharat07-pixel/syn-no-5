<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TRG OFFR PORTAL</title>
    <style>
      /* =========================================
       CO Portal Theme â€” single source of truth
       Tweak these 10 variables to match CO portal exactly
       ========================================= */
      :root {
        --co-bg: #6be4ff; /* Page background */
        --co-bg-grad-1: #60f8f6; /* Background gradient stop 1 */
        --co-bg-grad-2: #d860f0; /* Background gradient stop 2 */

        --co-surface: #101827; /* Cards / sections */
        --co-surface-2: #0c1321; /* Table headers / emphasis */
        --co-border: #1c2740; /* Subtle borders */

        --co-ink: #e6ecf8; /* Primary text */
        --co-muted: #96a3bf; /* Secondary text */

        --co-primary: #2563eb; /* Primary brand */
        --co-accent: #f5c84b; /* Accent (gold) */
        --co-success: #16a34a; /* Success (green) */
        --co-warning: #f59e0b; /* Warning (amber) */
        --co-info: #0ea5e9; /* Info (sky) */
        --co-danger: #dc2626; /* Danger (red) */

        --shadow: 0 16px 60px rgba(0, 0, 0, 0.35);
        --radius-lg: 16px;
        --radius-md: 12px;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html,
      body {
        height: 100%;
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
          Arial, sans-serif;
        color: var(--co-ink);
        background-color: #c3ecf5;
        display: grid;
        place-items: start center;
        padding: 20px;
      }

      .form-group {
        margin-bottom: 10px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: var(--co-accent);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        width: 100%;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 10px;
      }

      /* Corner logos */
      .corner-img {
        position: absolute;
        top: 12px;
        width: 120px;
        height: auto;
        z-index: 2;
      }
      .corner-left {
        left: 12px;
      }
      .corner-right {
        right: 12px;
      }
      .corner-img img {
        max-width: 100%;
        height: auto;
        display: block;
        border-radius: 8px;
        background: rgba(0, 0, 0, 0.35);
        padding: 4px;
        border: 1px solid var(--co-border);
      }

      header {
        position: relative;
        text-align: center;
        margin: 8px 0 24px;
        width: min(1100px, 96vw);
      }
      header h1 {
        color: var(--co-accent);
        font-size: 1.9rem;
        letter-spacing: 2px;
        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
      }
      header p {
        margin-top: 6px;
        color: var(--co-muted);
        font-size: 0.95rem;
      }

      /* Layout */
      .dashboard {
        display: grid;
        grid-template-columns: 1fr;
        gap: 24px;
        width: min(1100px, 96vw);
      }

      /* Section cards with accent bar and tone */
      .section {
        background: var(--co-surface);
        border-radius: var(--radius-lg);
        padding: 18px 20px;
        box-shadow: var(--shadow);
        border: 1px solid var(--co-border);
        position: relative;
        overflow: hidden;
      }
      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: var(--co-primary);
      }
      .section h2 {
        margin-bottom: 12px;
        font-size: 1.15rem;
        display: flex;
        align-items: center;
        gap: 10px;
        color: var(--co-ink);
      }
      .section .sub {
        color: var(--co-muted);
        font-size: 0.9rem;
        margin-top: -6px;
        margin-bottom: 10px;
      }

      /* Accent variants matching CO color coding */
      .accent-primary::before {
        background: var(--co-primary);
      }
      .accent-success::before {
        background: var(--co-success);
      }
      .accent-warning::before {
        background: var(--co-warning);
      }
      .accent-info::before {
        background: var(--co-info);
      }
      .accent-danger::before {
        background: var(--co-danger);
      }

      /* Buttons */
      .actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
      .btn {
        all: unset;
        display: inline-block;
        padding: 10px 16px;
        border-radius: var(--radius-md);
        color: #071222;
        font-weight: 700;
        text-align: center;
        cursor: pointer;
        transition: transform 0.06s ease, box-shadow 0.2s ease, filter 0.2s ease;
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
      }
      .btn:hover {
        transform: translateY(-1px);
        filter: brightness(1.02);
      }
      .btn:active {
        transform: translateY(0);
      }

      .btn--primary {
        background: linear-gradient(135deg, #3b82f6, var(--co-primary));
        color: #071222;
      }
      .btn--success {
        background: linear-gradient(135deg, #22c55e, var(--co-success));
        color: #05160c;
      }
      .btn--warning {
        background: linear-gradient(135deg, #fbbf24, var(--co-warning));
        color: #231a03;
      }
      .btn--info {
        background: linear-gradient(135deg, #38bdf8, var(--co-info));
        color: #03131a;
      }
      .btn--danger {
        background: linear-gradient(135deg, #ef4444, var(--co-danger));
        color: #1a0606;
      }

      /* Table */
      table {
        width: 100%;
        border-collapse: collapse;
        overflow: hidden;
        border-radius: 10px;
      }
      thead tr {
        background-color: var(--co-surface-2);
      }
      th,
      td {
        padding: 10px 12px;
        border-bottom: 1px solid var(--co-border);
        text-align: left;
      }
      th {
        color: var(--co-accent);
        font-weight: 700;
        font-size: 0.92rem;
      }
      tbody tr:hover {
        background: rgba(37, 99, 235, 0.06);
      }

      /* Flash list */
      .list {
        list-style: none;
        padding-left: 0;
        display: grid;
        gap: 8px;
      }
      .list li {
        display: flex;
        align-items: center;
        gap: 10px;
        color: var(--co-ink);
      }
      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 0.85rem;
        font-weight: 700;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }
      .chip--warning {
        background: rgba(245, 158, 11, 0.15);
        color: #ffd37a;
      }
      .chip--info {
        background: rgba(14, 165, 233, 0.15);
        color: #aee6ff;
      }
      .chip--success {
        background: rgba(22, 163, 74, 0.15);
        color: #aef7c6;
      }
      .chip--danger {
        background: rgba(220, 38, 38, 0.15);
        color: #ffb1b1;
      }

      /* Sticky notes */
      #notesContainer {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 12px;
        margin-bottom: 12px;
      }
      .note-card {
        background: #0f172a;
        padding: 12px;
        border-radius: 10px;
        position: relative;
        word-wrap: break-word;
        border: 1px solid var(--co-border);
        min-height: 64px;
      }
      .note-card button {
        position: absolute;
        top: 6px;
        right: 6px;
        all: unset;
        cursor: pointer;
        color: #ff6b6b;
        font-weight: bold;
        padding: 4px 8px;
      }
      textarea,
      .input {
        width: 100%;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid var(--co-border);
        background: #0b1324;
        color: var(--co-ink);
        resize: vertical;
        min-height: 60px;
        margin-bottom: 10px;
        font: inherit;
      }

      /* Small helpers */
      .row {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      .muted {
        color: var(--co-muted);
        font-size: 0.9rem;
      }

      /* Responsive */
      @media (min-width: 860px) {
        .dashboard {
          grid-template-columns: 1fr 1fr;
        }
        .span-2 {
          grid-column: span 2;
        }
      }
      .wrap-sections {
        display: flex;
        gap: 24px;
        width: 100%;
        flex-wrap: wrap;
      }
      .half {
        flex: 1 1 100%;
      }
      @media (min-width: 768px) {
        .half {
          flex: 1 1 calc(50% - 12px);
        }
      }
      .wrap-sections {
        display: flex;
        gap: 24px;
        flex-wrap: wrap;
        width: 100%;
      }
      .half {
        flex: 1 1 calc(50% - 12px);
        display: flex;
        flex-direction: column;
      }
      .equal-height > .section {
        flex: 1;
      }
      @media (max-width: 768px) {
        .half {
          flex: 1 1 100%;
        }
      }
      .btn-primary {
        background-color: #17a2b8;
        color: white;
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px;
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Corner Logos -->
    <div class="corner-img corner-left" aria-hidden="true">
      <img src="left-logo.png" alt="Organization logo left" />
    </div>
    <div class="corner-img corner-right" aria-hidden="true">
      <img src="right-logo.png" alt="Organization logo right" />
    </div>

    <header>
      <h1>TRG OFFR PORTAL</h1>
      <p class="muted"></p>
    </header>
    <button style="margin-left: auto" class="btn-primary" onclick="logout()">
      Sign Out
    </button>
    <section class="section accent-info half">
      <img height="200px" src="/training-officer.jpeg" alt="Training JCO" />
      <br />
      <h2>Training officer</h2>
      <h3>8 Kumaon</h3>
    </section>
    <br />
    <main class="dashboard">
      <div class="row wrap-sections equal-height">
        <!-- CTO Script Viewer -->
        <section class="section accent-info half">
          <h2>
            Reports from Training JCO <span class="chip chip--info">Docs</span>
          </h2>
          <div id="materialSelect">No reports found</div>
        </section>

        <!-- Flash News -->
        <section class="section accent-warning half">
          <marquee
            behavior="hover"
            direction="up"
            scrollamount="2"
            height="100px"
          >
            <h2>
              Flash News: Upcoming Events
              <span class="chip chip--warning">Alerts</span>
            </h2>
            <marquee behavior="hover" direction="top"></marquee>
            <ul class="list" aria-live="polite" aria-atomic="true">
              <li>Loadingâ€¦</li>
            </ul></marquee
          >
        </section>
      </div>

      <!-- Daily Programme List -->
      <section class="section accent-primary span-2">
        <h2>
          Daily Training Programme <span class="chip chip--success">Live</span>
        </h2>
        <table aria-label="Daily training programme">
          <thead>
            <tr>
              <th>S. No.</th>
              <th>Course</th>
              <th>Time</th>
              <th>Activity</th>
              <th>Instructor</th>
            </tr>
            <tr>
              <td>1.</td>
              <td>Sec Cdr</td>
              <td>0830Hrs-1325Hrs</td>
              <td>7.62mm SIG SAUER</td>
              <td>WTI Gokaran Singh</td>
            </tr>
            <tr>
              <td>2.</td>
              <td>Commando</td>
              <td>0830Hrs-1325Hrs</td>
              <td>Wpn Trg</td>
              <td>HI Pardeep Parihar</td>
            </tr>
            <tr>
              <td>3.</td>
              <td>M.W</td>
              <td>0830Hrs-1325Hrs</td>
              <td>Types of knots and ropes</td>
              <td>HI Jagdish Bhandari</td>
            </tr>
            <tr>
              <td>4.</td>
              <td>PPTC</td>
              <td>0830Hrs-1325Hrs</td>
              <td>Pole Vault</td>
              <td>Nk Kamal Singh</td>
            </tr>
            <tr>
              <td>5.</td>
              <td>Drone</td>
              <td>0830Hrs-1325Hrs</td>
              <td>Types of Drones and their usage</td>
              <td>Nk Deepak Singh</td>
            </tr>
            <tr>
              <td>6.</td>
              <td>ADC</td>
              <td>0830Hrs-1325Hrs</td>
              <td>Cane Drill</td>
              <td>DI Hem Chandra Pant</td>
            </tr>
          </thead>
          <tbody>
            <!-- Populate dynamically -->
          </tbody>
        </table>
        <br />

        <p class="sub">
          Note: Synced with CO master schedule and Trg Calendar.
        </p>
      </section>

      <!-- Daily Attendance -->
      <section class="section accent-success">
        <h2>
          Daily Coursewise Attendance
          <span class="chip chip--success">Core</span>
        </h2>
        <a href="attendance.html" class="btn btn--success"
          >ðŸ“‹ View Attendance</a
        >
      </section>

      <div class="row wrap-sections equal-height">
        <!-- Sticky Notes for CO -->
        <section class="section accent-warning span-2">
          <h2>
            Sticky Notes for CO <span class="chip chip--warning">Quick</span>
          </h2>
          <div id="notesContainer" aria-live="polite"></div>
          <form id="stickyForm" onsubmit="addSticky(event, 'CO')">
            <textarea
              id="noteInput"
              placeholder="Type your note here..."
              aria-label="Note text"
            ></textarea>
            <div class="row">
              <button id="addNote" class="btn btn--warning" type="submit">
                Add Note
              </button>
            </div>
          </form>
          <br />
        </section>
        <!-- Sticky Notes for JCOs -->
        <section class="section accent-warning span-2">
          <h2>
            Sticky Notes for TRG JCO
            <span class="chip chip--warning">Quick</span>
          </h2>
          <div id="notesContainer" aria-live="polite"></div>
          <form id="stickyForm" onsubmit="addSticky(event, 'TrgJCO')">
            <textarea
              id="noteInput"
              placeholder="Type your note here..."
              aria-label="Note text"
            ></textarea>
            <div class="row">
              <button id="addNote" class="btn btn--warning" type="submit">
                Add Note
              </button>
            </div>
          </form>
          <br />
        </section>
      </div>

      <!-- BPET Summary -->
      <section class="section accent-success">
        <h2>BPET Summary <span class="chip chip--success">Fitness</span></h2>
        <a href="bpet-summary.html" class="btn btn--success"
          >ðŸ§ª View BPET Results</a
        >
      </section>

      <!-- Firing Summary -->
      <section class="section accent-danger">
        <h2>Firing Summary <span class="chip chip--danger">Range</span></h2>
        <a href="firing-summary.html" class="btn btn--danger"
          >ðŸŽ¯ View Firing Scores</a
        >
      </section>

      <!-- PPT Summary -->
      <section class="section accent-info half">
        <h2>PPT Summary <span class="chip chip--info">Fitness</span></h2>
        <a
          href="/study-material/itcs/DBMS.pdf"
          target="_blank"
          class="btn btn--info"
          >ðŸ“Š View PPT Summary</a
        >
      </section>

      <section class="section accent-primary half">
        <h2>
          Manage Training Schedule <span class="chip chip--info">Admin</span>
        </h2>
        <div class="actions">
          <a href="schedule-add.html" class="btn btn--primary">Add Schedule</a>
          <a href="schedule-edit.html" class="btn btn--warning"
            >Edit Schedule</a
          >
          <a href="schedule-delete.html" class="btn btn--danger"
            >Remove Schedule</a
          >
        </div>
      </section>

      <!-- Weekly Feedback Form -->
      <section class="section accent-primary span-2">
        <h2>
          Weekly Feedback to CO <span class="chip chip--info">Comms</span>
        </h2>
        <!-- Feedback Form -->
        <form id="summary-form" onsubmit="submitSummary(event)">
          <div class="form-group">
            <label for="sNo">S. No.:</label>
            <input
              type="number"
              name="sNo"
              id="sNo"
              placeholder="Enter S. No."
              required
            />
          </div>

          <div class="form-group">
            <label for="course">Course:</label>
            <select name="course" id="course-select" required>
              <option value="">Select Course</option>
            </select>
          </div>

          <div class="form-group">
            <label for="totalStrength">Total Strength:</label>
            <input
              type="number"
              name="totalStrength"
              id="totalStrength"
              placeholder="Enter Total Strength"
              required
            />
          </div>

          <div class="form-group">
            <label for="presentStrength">Present Strength:</label>
            <input
              type="number"
              name="presentStrength"
              id="presentStrength"
              placeholder="Enter Present Strength"
              required
            />
          </div>

          <div class="form-group">
            <label for="absentStrength">Absent Strength:</label>
            <input
              type="number"
              name="absentStrength"
              id="absentStrength"
              placeholder="Enter Absent Strength"
              required
            />
          </div>

          <div class="form-group">
            <label for="remarks">Remarks:</label>
            <textarea
              name="remarks"
              id="remarks"
              rows="4"
              placeholder="Share your remarks about the training, course content, or overall experience..."
              required
            ></textarea>
          </div>
          <button type="submit" class="summary-submit-btn btn btn--info">
            Submit Summary
          </button>
          <div
            id="summary-status"
            style="margin-top: 10px; font-weight: bold"
          ></div>
        </form>
        <br />
      </section>
    </main>

    <script>
      // Flash News: configurable items with semantic levels
      const flashNews = [
        { icon: "ðŸ“…", text: "BPET scheduled on 18 Aug", level: "warning" },
        { icon: "ðŸŽ¯", text: "Firing practice on 20 Aug", level: "danger" },
        { icon: "ðŸ§ ", text: "AI Workshop on 22 Aug", level: "info" },
        {
          icon: "ðŸ“…",
          text: "AV 3rd Batch Assessment Test on 27 Aug ",
          level: "info",
        },
      ];
      const newsList = document.querySelector(".section.accent-warning .list");
      if (newsList) {
        newsList.innerHTML = "";
        flashNews.forEach((item) => {
          const li = document.createElement("li");
          const chip = document.createElement("span");
          chip.className = `chip chip--${item.level}`;
          chip.textContent = item.icon;
          const text = document.createElement("span");
          text.textContent = item.text;
          li.appendChild(chip);
          li.appendChild(text);
          newsList.appendChild(li);
        });
      }

      // Sticky Notes with localStorage persistence
      const notesKey = "trg_offr_notes";
      const notesContainer = document.getElementById("notesContainer");
      const noteInput = document.getElementById("noteInput");
      const addBtn = document.getElementById("addNote");
      const clearBtn = document.getElementById("clearNotes");

      const loadNotes = () => {
        try {
          const raw = localStorage.getItem(notesKey);
          return raw ? JSON.parse(raw) : [];
        } catch {
          return [];
        }
      };
      const saveNotes = (notes) => {
        localStorage.setItem(notesKey, JSON.stringify(notes));
      };
      const renderNotes = () => {
        notesContainer.innerHTML = "";
        const notes = loadNotes();
        notes.forEach((text, idx) => {
          const card = document.createElement("div");
          card.className = "note-card";
          card.textContent = text;

          const removeBtn = document.createElement("button");
          removeBtn.innerText = "Ã—";
          removeBtn.title = "Remove note";
          removeBtn.onclick = () => {
            const updated = loadNotes().filter((_, i) => i !== idx);
            saveNotes(updated);
            renderNotes();
          };

          card.appendChild(removeBtn);
          notesContainer.appendChild(card);
        });
      };

      // addBtn.onclick = () => {
      //   const text = (noteInput.value || "").trim();
      //   if (!text) return;
      //   const notes = loadNotes();
      //   notes.unshift(text);
      //   saveNotes(notes);
      //   noteInput.value = "";
      //   renderNotes();
      // };
      // clearBtn.onclick = () => {
      //   if (confirm("Clear all notes on this device?")) {
      //     localStorage.removeItem(notesKey);
      //     renderNotes();
      //   }
      // };
      // renderNotes();
    </script>
    <script src="training-officer.js"></script>
  </body>
</html>
